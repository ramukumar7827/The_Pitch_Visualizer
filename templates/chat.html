<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Pitch Visualizer</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<style>
		body {
			background: #f4f6f8;
			font-family: Arial, sans-serif;
		}

		.container {
			max-width: 1000px;
			margin-top: 40px;
		}

		textarea {
			resize: none;
		}

		#storyboardArea {
			display: flex;
			flex-wrap: wrap;
			gap: 15px;
			margin-top: 25px;
		}

		.panel-card {
			background: #fff;
			border-radius: 8px;
			padding: 10px;
			width: calc(33.333% - 10px);
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
		}

		.panel-card img {
			width: 100%;
			height: 180px;
			object-fit: cover;
			border-radius: 6px;
		}

		.panel-caption {
			font-size: 13px;
			color: #333;
			margin-top: 6px;
			text-align: center;
		}

		.loading {
			width: 100%;
			text-align: center;
			font-size: 16px;
			color: #666;
		}

		@media (max-width: 992px) {
			.panel-card {
				width: calc(50% - 10px);
			}
		}

		@media (max-width: 576px) {
			.panel-card {
				width: 100%;
			}
		}
	</style>
</head>

<body>

	<div class="container">
		<h3 class="mb-3">Pitch Visualizer</h3>
		<p>Paste a short story and generate a visual storyboard.</p>

		<form id="storyForm">
			<div class="form-group">
				<textarea id="storyText" class="form-control" rows="5" placeholder="Enter your story here..."
					required></textarea>
			</div>
			<button type="submit" class="btn btn-primary">Generate Storyboard</button>
		</form>

		<div id="storyboardArea"></div>
	</div>

	<script>
		$("#storyForm").on("submit", function (e) {
			e.preventDefault();

			const story = $("#storyText").val().trim();
			if (!story) return;

			$("#storyboardArea").html(`
        <div class="loading">
            <div class="spinner-border text-primary"></div>
            <p>Generating storyboard.....</p>
        </div>
    `);

			$.ajax({
				type: "POST",
				url: "/storyboard",
				contentType: "application/json",
				data: JSON.stringify({ input: story })
			})
				.done(function (data) {
					$("#storyboardArea").empty();
					data.images.forEach((img, index) => {
						$("#storyboardArea").append(`
                <div class="panel-card">
                    <img src="${img}">
                </div>
            `);
					});
				})
				.fail(function () {
					$("#storyboardArea").html(`
            <div class="alert alert-danger mt-3">
                Something went wrong. Check server logs.
            </div>
        `);
				});
		});
	</script>

</body>

</html>